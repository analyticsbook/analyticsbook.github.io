<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="Statistical process control using decision tree | Data Analytics" />
<meta property="og:type" content="book" />





<meta name="author" content="Shuai Huang &amp; Houtao Deng" />


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="description" content="Statistical process control using decision tree | Data Analytics">

<title>Statistical process control using decision tree | Data Analytics</title>

<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />
<script src="https://use.typekit.net/ajy6rnl.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>
<!-- <link rel="stylesheet" href="css/normalize.css"> -->
<!-- <link rel="stylesheet" href="css/envisioned.css"/> -->
<link rel="stylesheet" href="css/tablesaw-stackonly.css"/>
<link rel="stylesheet" href="css/nudge.css"/>
<link rel="stylesheet" href="css/sourcesans.css"/>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>




</head>

<body>

<!--bookdown:toc:start-->

<nav class="pushy pushy-left" id="TOC">
<ul>
<li><a href="#preface">Preface</a></li>
<li><a href="#acknowledgments">Acknowledgments</a></li>
<li><a href="#chapter-1.-introduction">Chapter 1. Introduction</a></li>
<li><a href="#chapter-2.-abstraction-regression-tree-models">Chapter 2. Abstraction: Regression &amp; Tree Models</a></li>
<li><a href="#chapter-3.-recognition-logistic-regression-ranking">Chapter 3. Recognition: Logistic Regression &amp; Ranking</a></li>
<li><a href="#chapter-4.-resonance-bootstrap-random-forests">Chapter 4. Resonance: Bootstrap &amp; Random Forests</a></li>
<li><a href="#chapter-5.-learning-i-cross-validation-oob">Chapter 5. Learning (I): Cross-validation &amp; OOB</a></li>
<li><a href="#chapter-6.-diagnosis-residuals-heterogeneity">Chapter 6. Diagnosis: Residuals &amp; Heterogeneity</a></li>
<li><a href="#chapter-7.-learning-ii-svm-ensemble-learning">Chapter 7. Learning (II): SVM &amp; Ensemble Learning</a></li>
<li><a href="#chapter-8.-scalability-lasso-pca">Chapter 8. Scalability: LASSO &amp; PCA</a></li>
<li><a href="#chapter-9.-pragmatism-experience-experimental">Chapter 9. Pragmatism: Experience &amp; Experimental</a></li>
<li><a href="#chapter-10.-synthesis-architecture-pipeline">Chapter 10. Synthesis: Architecture &amp; Pipeline</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#appendix-a-brief-review-of-background-knowledge">Appendix: A Brief Review of Background Knowledge</a></li>
</ul>
</nav>

<!--bookdown:toc:end-->

<div class="menu-btn"><h3>☰ Menu</h3></div>

<div class="site-overlay"></div>


<div class="row">
<div class="col-sm-12">

<nav class="pushy pushy-left" id="TOC">
<ul>
<li><a href="index.html#preface">Preface</a></li>
<li><a href="acknowledgments.html#acknowledgments">Acknowledgments</a></li>
<li><a href="chapter-1-introduction.html#chapter-1.-introduction">Chapter 1. Introduction</a></li>
<li><a href="chapter-2-abstraction-regression-tree-models.html#chapter-2.-abstraction-regression-tree-models">Chapter 2. Abstraction: Regression &amp; Tree Models</a></li>
<li><a href="chapter-3-recognition-logistic-regression-ranking.html#chapter-3.-recognition-logistic-regression-ranking">Chapter 3. Recognition: Logistic Regression &amp; Ranking</a></li>
<li><a href="chapter-4-resonance-bootstrap-random-forests.html#chapter-4.-resonance-bootstrap-random-forests">Chapter 4. Resonance: Bootstrap &amp; Random Forests</a></li>
<li><a href="chapter-5-learning-i-cross-validation-oob.html#chapter-5.-learning-i-cross-validation-oob">Chapter 5. Learning (I): Cross-validation &amp; OOB</a></li>
<li><a href="chapter-6-diagnosis-residuals-heterogeneity.html#chapter-6.-diagnosis-residuals-heterogeneity">Chapter 6. Diagnosis: Residuals &amp; Heterogeneity</a></li>
<li><a href="chapter-7-learning-ii-svm-ensemble-learning.html#chapter-7.-learning-ii-svm-ensemble-learning">Chapter 7. Learning (II): SVM &amp; Ensemble Learning</a></li>
<li><a href="chapter-8-scalability-lasso-pca.html#chapter-8.-scalability-lasso-pca">Chapter 8. Scalability: LASSO &amp; PCA</a></li>
<li><a href="chapter-9-pragmatism-experience-experimental.html#chapter-9.-pragmatism-experience-experimental">Chapter 9. Pragmatism: Experience &amp; Experimental</a></li>
<li><a href="chapter-10-synthesis-architecture-pipeline.html#chapter-10.-synthesis-architecture-pipeline">Chapter 10. Synthesis: Architecture &amp; Pipeline</a></li>
<li><a href="conclusion.html#conclusion">Conclusion</a></li>
<li><a href="appendix-a-brief-review-of-background-knowledge.html#appendix-a-brief-review-of-background-knowledge">Appendix: A Brief Review of Background Knowledge</a></li>
</ul>
</nav>

</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="statistical-process-control-using-decision-tree" class="section level2 unnumbered">
<h2>Statistical process control using decision tree</h2>
<p>A fundamental problem in <strong>statistical process control</strong> (<strong>SPC</strong>) is illustrated in Figure <a href="statistical-process-control-using-decision-tree.html#fig:f3-spcintro">36</a>: given a sequence of observations of a variable that <em>represents the temporal variability of a process</em>, is this process <em>stable</em>?</p>
<p></p>
<p>
<span class="marginnote shownote">
<!--
<div class="figure">--><span id="fig:f3-spcintro"></span>
<img src="graphics/3_spcintro.png" alt="A fundamental problem in statistical process control" width="250px"  />
<!--
<p class="caption marginnote">-->Figure 36: A fundamental problem in statistical process control<!--</p>-->
<!--</div>--></span>
</p>
<p></p>
<p>SPC is built on a creative application of the statistical distribution theory. A distribution model represents a <em>stable process</em>—that is the main premise of SPC—while also allots a calculated proportion to <em>chance outliers</em>. An illustration is shown in Figure <a href="statistical-process-control-using-decision-tree.html#fig:f3-spcintro2">37</a> (left).</p>
<p></p>
<div class="figure"><span id="fig:f3-spcintro2"></span>
<p class="caption marginnote shownote">
Figure 37: (Left) The use of a distribution model to represent a <em>stable process</em>; and (right) the basic idea of a control chart
</p>
<img src="graphics/3_spcintro2.png" alt="(Left) The use of a distribution model to represent a *stable process*; and (right) the basic idea of a control chart" width="100%"  />
</div>
<p></p>
<p>A further invention of SPC is to convert a distribution model, a static object, into a temporal chart, the so-called <strong>control chart</strong> , as shown in Figure <a href="statistical-process-control-using-decision-tree.html#fig:f3-spcintro2">37</a> (right). A <em>control chart</em> has the upper and lower <em>control limits</em>, and a <em>center line</em>. It is interesting to note that Figure <a href="statistical-process-control-using-decision-tree.html#fig:f3-spcintro2">37</a> (left) also provides a graphical illustration of how <em>hypothesis testing</em> works, and Figure <a href="statistical-process-control-using-decision-tree.html#fig:f3-spcintro2">37</a> (right) illustrates the concept of <em>control chart</em>. The two build on the same foundation and differ in perspectives: one is horizontal and the other vertical.</p>
<p>A control chart is used to monitor a process. A reference data is collected to draw the control limits and the center line. Then, new data will be continuously collected over time and drawn in the chart, as shown in Figure <a href="#fig:f3-spcintro4"><strong>??</strong></a>.</p>
<p><code>{r f3-spcintro4, echo=FALSE,out.width="100%", fig.margin=FALSE, fig.cap=" A control chart, built on a reference data (i.e., $x_1$-$x_8$), is used to monitor future data (i.e., $x_9$-$x_{12}$). An alarm is issued when $x_{12}$ is found to be *out of the control limit*.     " }   knitr::include_graphics('graphics/3_spcintro4.png',dpi = 300)</code></p>
<p>Because of this dependency of SPC on distribution models, a considerable amount of interest has been focused on extending it for applications where the data could not be characterized by a distribution. Along this endeavor, how to leverage decision tree models<label for="tufte-sn-71" class="margin-toggle sidenote-number">71</label><input type="checkbox" id="tufte-sn-71" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">71</span> Remember that the decision tree models can deal with complex datasets such as mixed types of variables, as discussed in <strong>Chapter 2</strong>.</span> for SPC purposes has been an interesting research problem.</p>
<div id="rationale-and-formulation-4" class="section level3 unnumbered">
<h3>Rationale and formulation</h3>
<p>One such interesting framework is proposed to cast the process monitoring problem shown in Figure <a href="#fig:f3-spcintro4"><strong>??</strong></a> as a classification problem: the <em>reference data</em> presumably collected from a stable process represents one class, while the <em>online data</em> collected after the reference data represents another class. If the two classes could be significantly separated, an alarm should be issued. Otherwise, if there is no change in the stable process, the two data sets must come from the same distribution, then it will be difficult to classify the two data sets. This will result in a large classification error.</p>
<p>In other words, the classification error is an indicator that we can monitor<label for="tufte-sn-72" class="margin-toggle sidenote-number">72</label><input type="checkbox" id="tufte-sn-72" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">72</span> While process monitoring sounds straightforward, the real challenge sometimes lies in the question about what to monitor, and how.</span>.</p>
<p>Here we introduce the <strong>real-time contrasts</strong> method (<strong>RTC</strong>). The key idea of <em>RTC</em> is to have a <strong>sliding window</strong> , with length of <span class="math inline">\(L\)</span>, that includes the most recent data points to be compared with the reference data. We label the <em>reference data</em> as one class, and the data points in the <em>sliding window</em> as another class. We track the classification error to monitor the process.</p>
<p>We illustrate the <em>RTC</em> method through a simple problem. The collected data for monitoring is shown in Table <a href="statistical-process-control-using-decision-tree.html#tab:t9-2">7</a>. The reference data is <span class="math inline">\(\{1,2\}\)</span>.</p>
<p></p>
<p><!--
<caption>--><span class="marginnote shownote"><span id="tab:t9-2">Table 7: </span>Example of an online dataset with <span class="math inline">\(4\)</span> time points</span><!--</caption>--></p>
<table>
<thead>
<tr class="header">
<th align="left"><strong>Data ID</strong></th>
<th align="left"><span class="math inline">\(1\)</span></th>
<th align="left"><span class="math inline">\(2\)</span></th>
<th align="left"><span class="math inline">\(3\)</span></th>
<th align="left"><span class="math inline">\(4\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Value</strong></td>
<td align="left"><span class="math inline">\(2\)</span></td>
<td align="left"><span class="math inline">\(1\)</span></td>
<td align="left"><span class="math inline">\(3\)</span></td>
<td align="left"><span class="math inline">\(3\)</span></td>
</tr>
</tbody>
</table>
<p></p>
<p>To monitor the process, we use a window size of <span class="math inline">\(2\)</span>. This means the first monitoring action takes place at the time when the <span class="math inline">\(2^{nd}\)</span> data point is collected. The reference dataset, <span class="math inline">\(\{1,2\}\)</span>, is labeled as class <span class="math inline">\(0\)</span>, and the two online data points, <span class="math inline">\(\{2,1\}\)</span>, are labeled as class <span class="math inline">\(1\)</span>. As these two datasets are identical, the classification error rate is as large as 0.5. No alarm is issued.</p>
<p>At the next time point, the sliding window now includes data points <span class="math inline">\(\{1,3\}\)</span>. A classification rule “<em>if value <span class="math inline">\(\leq 2\)</span>, class <span class="math inline">\(0\)</span>; else, class <span class="math inline">\(1\)</span></em>” would achieve the best classification error rate as <span class="math inline">\(0.25\)</span>. An alarm probably should be issued.</p>
<p>At the next time point, the sliding window includes data points <span class="math inline">\(\{3,3\}\)</span>. The same classification rule “<em>if value <span class="math inline">\(\leq 2\)</span>, class <span class="math inline">\(0\)</span>; else, class <span class="math inline">\(1\)</span></em>” can classify all examples correctly with error rate of <span class="math inline">\(0\)</span>. An alarm should be issued.</p>
<p>We see that the classification error rate is a <strong>monitoring statistic</strong> to guide the triggering of alerts. It is also useful to use the probability estimates of the data points as the <em>monitoring statistic</em>. In other words, the sum of the probability estimates from all data points in the sliding window can be used for monitoring, which is defined as</p>
<p><span class="math display">\[p_{t}=\frac{\sum_{i=1}^{w} \hat{p}_{1}\left(x_{i}\right)}{w}.\]</span></p>
<p>Here, <span class="math inline">\(\boldsymbol x_i\)</span> is the <span class="math inline">\(i^{th}\)</span> data point in the sliding window, <span class="math inline">\(w\)</span> is the window size, and <span class="math inline">\(\hat{p}_1(\boldsymbol x_i)\)</span> is the probability estimate of <span class="math inline">\(\boldsymbol x_i\)</span> belonging to class <span class="math inline">\(1\)</span>. At each time point in monitoring, we can obtain a <span class="math inline">\(p_t\)</span>. Following the tradition of control chart, we could chart the time series of <span class="math inline">\(p_t\)</span> and observe the patterns to see if alerts should be triggered.</p>
<!-- % Actually, through in-depth research into this idea of directly using classification error rate as the monitoring statistic, a limitation soon reveals itself. Considering the number of data points in the monitoring window, which is $ L$. The number of possible distinct classification error rate values are actually limited to be $L+1$. This suggests that, while the monitoring statistic should be a continuum, the resolution of the classification error rate to reflect the continuum maybe limited if the window size is too small. This will result in gaps between the monitoring statistics, failing to capture changes that happen in the gaps which are blind zones. -->
<!-- % As a remedy, the probability estimates of the data points can be used to replace the errors of the data points. The probability estimates are continuous indicators, while the errors are binary indicators. Then, the sum of the probability estimates from all data points in the sliding window can be used for monitoring, which is defined as: -->
<!-- % \[p_{t}=\frac{\sum_{i=1}^{w} \hat{p}_{1}\left(x_{i}\right)}{w}.\] -->
<!-- % Here, $\boldsymbol x_i$ is the $i^{th}$data point in the sliding window, $w$ is the window size, and $\hat{p}_1(\boldsymbol x_i)$ is the probability estimate of $\boldsymbol x_i$ belonging to $f_1(\boldsymbol x)$. At each time point in monitoring, we can obtain a $p_t$. Following the tradition of control chart, we could chart the time series of $p_t$ and observe the patterns to see if alerts should be triggered. -->
<!-- % Besides this monitoring capacity, on the other hand, we could also use the classification model for fault diagnosis. Specifically, when the random forest is used for classification, the importance scores from random forests can be used for fault diagnosis. When process is under normal conditions and the classification errors are expected to be high, the importance scores are expected to be equal among process variables as none of them contribute to the classification problem. When process is abnormal, classification errors should be reduced, and the variables responsible for the process abnormality should now have larger importance scores. This gives us the foundation for using random forest for fault diagnosis. -->
<!-- % Note that, under the RTC framework, the size of the sliding window is an important parameter. When the window is too long, the method requires a large number of real-time data in each monitoring epoch, which can delay the identification of abnormal patterns. In contrast, if the window is too short, the classifiers built on the small data sets may be unstable and are prone to more false positives. In our R lab, we will explore this phenomenon further. -->
</div>
<div id="r-lab-3" class="section level3 unnumbered">
<h3>R Lab</h3>
<p>We have coded the RTC method into a R function, <code>Monitoring()</code>, as shown below, to give an example about how to write self-defined function in R. This function takes two datasets as input: the first is the reference data, <code>data0</code>, and the second is the online data points, <code>data.real.time</code>. The window size should also be provided in <code>wsz</code>. And we use a classification method named random forest<label for="tufte-sn-73" class="margin-toggle sidenote-number">73</label><input type="checkbox" id="tufte-sn-73" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">73</span> More details are in <strong>Chapter 4</strong>.</span> to build a classifier. The <code>Monitoring()</code> function returns a few monitoring statistics for each online data point, and a score of each variable that represents how likely the variable is responsible for the process change.</p>
<p></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="statistical-process-control-using-decision-tree.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb55-2"><a href="statistical-process-control-using-decision-tree.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb55-3"><a href="statistical-process-control-using-decision-tree.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span>
<span id="cb55-4"><a href="statistical-process-control-using-decision-tree.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb55-5"><a href="statistical-process-control-using-decision-tree.html#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="statistical-process-control-using-decision-tree.html#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_gray</span>(<span class="at">base_size =</span> <span class="dv">15</span>) )</span>
<span id="cb55-7"><a href="statistical-process-control-using-decision-tree.html#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="statistical-process-control-using-decision-tree.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co"># define monitoring function. data0: reference data;</span></span>
<span id="cb55-9"><a href="statistical-process-control-using-decision-tree.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="co"># data.real.time: real-time data; wsz: window size</span></span>
<span id="cb55-10"><a href="statistical-process-control-using-decision-tree.html#cb55-10" aria-hidden="true" tabindex="-1"></a>Monitoring <span class="ot">&lt;-</span> <span class="cf">function</span>( data0, data.real.time, wsz ){</span>
<span id="cb55-11"><a href="statistical-process-control-using-decision-tree.html#cb55-11" aria-hidden="true" tabindex="-1"></a>num.data.points <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data.real.time)</span>
<span id="cb55-12"><a href="statistical-process-control-using-decision-tree.html#cb55-12" aria-hidden="true" tabindex="-1"></a>stat.mat <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb55-13"><a href="statistical-process-control-using-decision-tree.html#cb55-13" aria-hidden="true" tabindex="-1"></a>importance.mat <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb55-14"><a href="statistical-process-control-using-decision-tree.html#cb55-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-15"><a href="statistical-process-control-using-decision-tree.html#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>( i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num.data.points  ){</span>
<span id="cb55-16"><a href="statistical-process-control-using-decision-tree.html#cb55-16" aria-hidden="true" tabindex="-1"></a><span class="co"># at the start of monitoring, when real-time data size is </span></span>
<span id="cb55-17"><a href="statistical-process-control-using-decision-tree.html#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="co"># smaller than the window size, combine the real-time</span></span>
<span id="cb55-18"><a href="statistical-process-control-using-decision-tree.html#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="co"># data points and random samples from the reference data</span></span>
<span id="cb55-19"><a href="statistical-process-control-using-decision-tree.html#cb55-19" aria-hidden="true" tabindex="-1"></a><span class="co"># to form a data set of wsz</span></span>
<span id="cb55-20"><a href="statistical-process-control-using-decision-tree.html#cb55-20" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(i<span class="sc">&lt;</span>wsz){</span>
<span id="cb55-21"><a href="statistical-process-control-using-decision-tree.html#cb55-21" aria-hidden="true" tabindex="-1"></a>  ssfr <span class="ot">&lt;-</span> wsz <span class="sc">-</span> i</span>
<span id="cb55-22"><a href="statistical-process-control-using-decision-tree.html#cb55-22" aria-hidden="true" tabindex="-1"></a>  sample.reference <span class="ot">&lt;-</span> data0[<span class="fu">sample</span>(<span class="fu">nrow</span>(data0),</span>
<span id="cb55-23"><a href="statistical-process-control-using-decision-tree.html#cb55-23" aria-hidden="true" tabindex="-1"></a>                                 ssfr,<span class="at">replace =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb55-24"><a href="statistical-process-control-using-decision-tree.html#cb55-24" aria-hidden="true" tabindex="-1"></a>  current.real.time.data <span class="ot">&lt;-</span> <span class="fu">rbind</span>(sample.reference,</span>
<span id="cb55-25"><a href="statistical-process-control-using-decision-tree.html#cb55-25" aria-hidden="true" tabindex="-1"></a>                            data.real.time[<span class="dv">1</span><span class="sc">:</span>i,,<span class="at">drop=</span><span class="cn">FALSE</span>])</span>
<span id="cb55-26"><a href="statistical-process-control-using-decision-tree.html#cb55-26" aria-hidden="true" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb55-27"><a href="statistical-process-control-using-decision-tree.html#cb55-27" aria-hidden="true" tabindex="-1"></a>  current.real.time.data <span class="ot">&lt;-</span>  data.real.time[(i<span class="sc">-</span>wsz<span class="sc">+</span></span>
<span id="cb55-28"><a href="statistical-process-control-using-decision-tree.html#cb55-28" aria-hidden="true" tabindex="-1"></a>                                     <span class="dv">1</span>)<span class="sc">:</span>i,,drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb55-29"><a href="statistical-process-control-using-decision-tree.html#cb55-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-30"><a href="statistical-process-control-using-decision-tree.html#cb55-30" aria-hidden="true" tabindex="-1"></a>current.real.time.data<span class="sc">$</span>class <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb55-31"><a href="statistical-process-control-using-decision-tree.html#cb55-31" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">rbind</span>( data0, current.real.time.data )</span>
<span id="cb55-32"><a href="statistical-process-control-using-decision-tree.html#cb55-32" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">&quot;X&quot;</span>,<span class="dv">1</span><span class="sc">:</span>(<span class="fu">ncol</span>(data)<span class="sc">-</span><span class="dv">1</span>)),</span>
<span id="cb55-33"><a href="statistical-process-control-using-decision-tree.html#cb55-33" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;Class&quot;</span>)</span>
<span id="cb55-34"><a href="statistical-process-control-using-decision-tree.html#cb55-34" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Class <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(data<span class="sc">$</span>Class)</span>
<span id="cb55-35"><a href="statistical-process-control-using-decision-tree.html#cb55-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-36"><a href="statistical-process-control-using-decision-tree.html#cb55-36" aria-hidden="true" tabindex="-1"></a><span class="co"># apply random forests to the data</span></span>
<span id="cb55-37"><a href="statistical-process-control-using-decision-tree.html#cb55-37" aria-hidden="true" tabindex="-1"></a>my.rf <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(Class <span class="sc">~</span> .,<span class="at">sampsize=</span><span class="fu">c</span>(wsz,wsz), <span class="at">data=</span>data)</span>
<span id="cb55-38"><a href="statistical-process-control-using-decision-tree.html#cb55-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-39"><a href="statistical-process-control-using-decision-tree.html#cb55-39" aria-hidden="true" tabindex="-1"></a><span class="co"># get importance score</span></span>
<span id="cb55-40"><a href="statistical-process-control-using-decision-tree.html#cb55-40" aria-hidden="true" tabindex="-1"></a>importance.mat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(importance.mat, <span class="fu">t</span>(my.rf<span class="sc">$</span>importance))</span>
<span id="cb55-41"><a href="statistical-process-control-using-decision-tree.html#cb55-41" aria-hidden="true" tabindex="-1"></a><span class="co"># get monitoring statistics</span></span>
<span id="cb55-42"><a href="statistical-process-control-using-decision-tree.html#cb55-42" aria-hidden="true" tabindex="-1"></a>ooblist <span class="ot">&lt;-</span> my.rf[<span class="dv">5</span>]</span>
<span id="cb55-43"><a href="statistical-process-control-using-decision-tree.html#cb55-43" aria-hidden="true" tabindex="-1"></a>oobcolumn<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">c</span>(ooblist[[<span class="dv">1</span>]]),<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb55-44"><a href="statistical-process-control-using-decision-tree.html#cb55-44" aria-hidden="true" tabindex="-1"></a>ooberrornormal<span class="ot">=</span> (oobcolumn[,<span class="dv">3</span>])[<span class="dv">1</span>]</span>
<span id="cb55-45"><a href="statistical-process-control-using-decision-tree.html#cb55-45" aria-hidden="true" tabindex="-1"></a>ooberrorabnormal<span class="ot">=</span>(oobcolumn[,<span class="dv">3</span>])[<span class="dv">2</span>]</span>
<span id="cb55-46"><a href="statistical-process-control-using-decision-tree.html#cb55-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-47"><a href="statistical-process-control-using-decision-tree.html#cb55-47" aria-hidden="true" tabindex="-1"></a>temp<span class="ot">=</span>my.rf[<span class="dv">6</span>]</span>
<span id="cb55-48"><a href="statistical-process-control-using-decision-tree.html#cb55-48" aria-hidden="true" tabindex="-1"></a>p1vote <span class="ot">&lt;-</span> <span class="fu">mean</span>(temp<span class="sc">$</span>votes[,<span class="dv">2</span>][(<span class="fu">nrow</span>(data0)<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span><span class="fu">nrow</span>(data)])</span>
<span id="cb55-49"><a href="statistical-process-control-using-decision-tree.html#cb55-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-50"><a href="statistical-process-control-using-decision-tree.html#cb55-50" aria-hidden="true" tabindex="-1"></a>this.stat <span class="ot">&lt;-</span> <span class="fu">c</span>(ooberrornormal,ooberrorabnormal,p1vote)</span>
<span id="cb55-51"><a href="statistical-process-control-using-decision-tree.html#cb55-51" aria-hidden="true" tabindex="-1"></a>stat.mat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(stat.mat, this.stat)</span>
<span id="cb55-52"><a href="statistical-process-control-using-decision-tree.html#cb55-52" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-53"><a href="statistical-process-control-using-decision-tree.html#cb55-53" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">importance.mat =</span> importance.mat,</span>
<span id="cb55-54"><a href="statistical-process-control-using-decision-tree.html#cb55-54" aria-hidden="true" tabindex="-1"></a>               <span class="at">stat.mat =</span> stat.mat)</span>
<span id="cb55-55"><a href="statistical-process-control-using-decision-tree.html#cb55-55" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span>(result)</span>
<span id="cb55-56"><a href="statistical-process-control-using-decision-tree.html#cb55-56" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p></p>
<p>To demonstrate how to use <code>Monitoring()</code>, let’s consider a <span class="math inline">\(2\)</span>-dimensional process with two variables, <span class="math inline">\(x_1\)</span> and <span class="math inline">\(x_2\)</span>. We simulate the reference data that follow a normal distribution with mean of <span class="math inline">\(0\)</span> and standard deviation of <span class="math inline">\(1\)</span>. The online data come from two distributions: the first <span class="math inline">\(100\)</span> data points are sampled from the same distribution as the reference data, while the second <span class="math inline">\(100\)</span> data points are sampled from another distribution (i.e., the mean of <span class="math inline">\(x_2\)</span> changes to <span class="math inline">\(2\)</span>). We label the reference data with class <span class="math inline">\(0\)</span> and the online data with class <span class="math inline">\(1\)</span>.</p>
<p></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="statistical-process-control-using-decision-tree.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data generation</span></span>
<span id="cb56-2"><a href="statistical-process-control-using-decision-tree.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># sizes of reference data, real-time data without change, </span></span>
<span id="cb56-3"><a href="statistical-process-control-using-decision-tree.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># and real-time data with changes</span></span>
<span id="cb56-4"><a href="statistical-process-control-using-decision-tree.html#cb56-4" aria-hidden="true" tabindex="-1"></a>length0 <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb56-5"><a href="statistical-process-control-using-decision-tree.html#cb56-5" aria-hidden="true" tabindex="-1"></a>length1 <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb56-6"><a href="statistical-process-control-using-decision-tree.html#cb56-6" aria-hidden="true" tabindex="-1"></a>length2 <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb56-7"><a href="statistical-process-control-using-decision-tree.html#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="statistical-process-control-using-decision-tree.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 2-dimension</span></span>
<span id="cb56-9"><a href="statistical-process-control-using-decision-tree.html#cb56-9" aria-hidden="true" tabindex="-1"></a>dimension <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb56-10"><a href="statistical-process-control-using-decision-tree.html#cb56-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-11"><a href="statistical-process-control-using-decision-tree.html#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co"># reference data</span></span>
<span id="cb56-12"><a href="statistical-process-control-using-decision-tree.html#cb56-12" aria-hidden="true" tabindex="-1"></a>data0 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>( dimension <span class="sc">*</span> length0, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb56-13"><a href="statistical-process-control-using-decision-tree.html#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co"># real-time data with no change</span></span>
<span id="cb56-14"><a href="statistical-process-control-using-decision-tree.html#cb56-14" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>( dimension <span class="sc">*</span> length2, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb56-15"><a href="statistical-process-control-using-decision-tree.html#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co"># real-time data different from the reference data in the </span></span>
<span id="cb56-16"><a href="statistical-process-control-using-decision-tree.html#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co"># second the variable</span></span>
<span id="cb56-17"><a href="statistical-process-control-using-decision-tree.html#cb56-17" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">cbind</span>( <span class="at">V1 =</span> <span class="fu">rnorm</span>( <span class="dv">1</span> <span class="sc">*</span> length1, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), </span>
<span id="cb56-18"><a href="statistical-process-control-using-decision-tree.html#cb56-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">V2 =</span> <span class="fu">rnorm</span>( <span class="dv">1</span> <span class="sc">*</span> length1, <span class="at">mean =</span> <span class="dv">2</span>, <span class="at">sd =</span> <span class="dv">1</span>) )</span>
<span id="cb56-19"><a href="statistical-process-control-using-decision-tree.html#cb56-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-20"><a href="statistical-process-control-using-decision-tree.html#cb56-20" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to data frame</span></span>
<span id="cb56-21"><a href="statistical-process-control-using-decision-tree.html#cb56-21" aria-hidden="true" tabindex="-1"></a>data0 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(data0, <span class="at">nrow =</span> length0, <span class="at">byrow =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-22"><a href="statistical-process-control-using-decision-tree.html#cb56-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb56-23"><a href="statistical-process-control-using-decision-tree.html#cb56-23" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(data1, <span class="at">nrow =</span> length2, <span class="at">byrow =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-24"><a href="statistical-process-control-using-decision-tree.html#cb56-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb56-25"><a href="statistical-process-control-using-decision-tree.html#cb56-25" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data2 <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb56-26"><a href="statistical-process-control-using-decision-tree.html#cb56-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-27"><a href="statistical-process-control-using-decision-tree.html#cb56-27" aria-hidden="true" tabindex="-1"></a><span class="co"># assign variable names</span></span>
<span id="cb56-28"><a href="statistical-process-control-using-decision-tree.html#cb56-28" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>( data0 ) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;X&quot;</span>,<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(data0))</span>
<span id="cb56-29"><a href="statistical-process-control-using-decision-tree.html#cb56-29" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>( data1 ) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;X&quot;</span>,<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(data1))</span>
<span id="cb56-30"><a href="statistical-process-control-using-decision-tree.html#cb56-30" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>( data2 ) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;X&quot;</span>,<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(data2))</span>
<span id="cb56-31"><a href="statistical-process-control-using-decision-tree.html#cb56-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-32"><a href="statistical-process-control-using-decision-tree.html#cb56-32" aria-hidden="true" tabindex="-1"></a><span class="co"># assign reference data with class 0 and real-time data with class 1</span></span>
<span id="cb56-33"><a href="statistical-process-control-using-decision-tree.html#cb56-33" aria-hidden="true" tabindex="-1"></a>data0 <span class="ot">&lt;-</span> data0 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">class =</span> <span class="dv">0</span>)</span>
<span id="cb56-34"><a href="statistical-process-control-using-decision-tree.html#cb56-34" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> data1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">class =</span> <span class="dv">1</span>)</span>
<span id="cb56-35"><a href="statistical-process-control-using-decision-tree.html#cb56-35" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">class =</span> <span class="dv">1</span>)</span>
<span id="cb56-36"><a href="statistical-process-control-using-decision-tree.html#cb56-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-37"><a href="statistical-process-control-using-decision-tree.html#cb56-37" aria-hidden="true" tabindex="-1"></a><span class="co"># real-time data consists of normal data and abnormal data</span></span>
<span id="cb56-38"><a href="statistical-process-control-using-decision-tree.html#cb56-38" aria-hidden="true" tabindex="-1"></a>data.real.time <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data1,data2)</span></code></pre></div>
<p></p>
<p></p>
<p>
<span class="marginnote shownote">
<!--
<div class="figure">--><span id="fig:f9-11"></span>
<img src="graphics/9_11.png" alt="Scatterplot of the reference dataset and the first $100$ online data points; both data come from the process under normal condition " width="250px"  />
<!--
<p class="caption marginnote">-->Figure 38: Scatterplot of the reference dataset and the first <span class="math inline">\(100\)</span> online data points; both data come from the process under normal condition <!--</p>-->
<!--</div>--></span>
</p>
<p></p>
<p>Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-11">38</a> shows the scatterplot of the reference dataset and the first <span class="math inline">\(100\)</span> online data points. It can be seen that the two sets of data points are similar.</p>
<p></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="statistical-process-control-using-decision-tree.html#cb57-1" aria-hidden="true" tabindex="-1"></a>data.plot <span class="ot">&lt;-</span> <span class="fu">rbind</span>( data0, data1 ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">factor</span>(class))</span>
<span id="cb57-2"><a href="statistical-process-control-using-decision-tree.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data.plot, <span class="fu">aes</span>(<span class="at">x=</span>X1, <span class="at">y=</span>X2, <span class="at">shape =</span> class, <span class="at">color=</span>class)) <span class="sc">+</span> </span>
<span id="cb57-3"><a href="statistical-process-control-using-decision-tree.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>)</span></code></pre></div>
<p></p>
<p>Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-12">39</a> shows the scatterplot of the reference dataset and the second <span class="math inline">\(100\)</span> online data points.</p>
<p></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="statistical-process-control-using-decision-tree.html#cb58-1" aria-hidden="true" tabindex="-1"></a>data.plot <span class="ot">&lt;-</span> <span class="fu">rbind</span>( data0, data2 ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">class =</span> <span class="fu">factor</span>(class))</span>
<span id="cb58-2"><a href="statistical-process-control-using-decision-tree.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data.plot, <span class="fu">aes</span>(<span class="at">x=</span>X1, <span class="at">y=</span>X2, <span class="at">shape =</span> class,</span>
<span id="cb58-3"><a href="statistical-process-control-using-decision-tree.html#cb58-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">color=</span>class)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>)</span></code></pre></div>
<p></p>
<p></p>
<p>
<span class="marginnote shownote">
<!--
<div class="figure">--><span id="fig:f9-12"></span>
<img src="graphics/9_12.png" alt="Scatterplot of the reference dataset and the second $100$ online data points that come from the process under abnormal condition" width="250px"  />
<!--
<p class="caption marginnote">-->Figure 39: Scatterplot of the reference dataset and the second <span class="math inline">\(100\)</span> online data points that come from the process under abnormal condition<!--</p>-->
<!--</div>--></span>
</p>
<p></p>
<p>Now we apply the <em>RTC</em> method. A <em>window size</em> of <span class="math inline">\(10\)</span> is used. The error rates of the two classes and the probability estimates of the data points over time are shown in Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-13">40</a> drawn by the following R code.</p>
<p></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="statistical-process-control-using-decision-tree.html#cb59-1" aria-hidden="true" tabindex="-1"></a>wsz <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb59-2"><a href="statistical-process-control-using-decision-tree.html#cb59-2" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">Monitoring</span>( data0, data.real.time, wsz )</span>
<span id="cb59-3"><a href="statistical-process-control-using-decision-tree.html#cb59-3" aria-hidden="true" tabindex="-1"></a>stat.mat <span class="ot">&lt;-</span> result<span class="sc">$</span>stat.mat</span>
<span id="cb59-4"><a href="statistical-process-control-using-decision-tree.html#cb59-4" aria-hidden="true" tabindex="-1"></a>importance.mat <span class="ot">&lt;-</span> result<span class="sc">$</span>importance.mat</span>
<span id="cb59-5"><a href="statistical-process-control-using-decision-tree.html#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="statistical-process-control-using-decision-tree.html#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co"># plot different monitor statistics</span></span>
<span id="cb59-7"><a href="statistical-process-control-using-decision-tree.html#cb59-7" aria-hidden="true" tabindex="-1"></a>stat.mat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(stat.mat)</span>
<span id="cb59-8"><a href="statistical-process-control-using-decision-tree.html#cb59-8" aria-hidden="true" tabindex="-1"></a>stat.mat<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(stat.mat)</span>
<span id="cb59-9"><a href="statistical-process-control-using-decision-tree.html#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(stat.mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;error0&quot;</span>,<span class="st">&quot;error1&quot;</span>,<span class="st">&quot;prob&quot;</span>,<span class="st">&quot;id&quot;</span>)</span>
<span id="cb59-10"><a href="statistical-process-control-using-decision-tree.html#cb59-10" aria-hidden="true" tabindex="-1"></a>stat.mat <span class="ot">&lt;-</span> stat.mat <span class="sc">%&gt;%</span> <span class="fu">gather</span>(type, statistics, error0,</span>
<span id="cb59-11"><a href="statistical-process-control-using-decision-tree.html#cb59-11" aria-hidden="true" tabindex="-1"></a>                                error1,prob)</span>
<span id="cb59-12"><a href="statistical-process-control-using-decision-tree.html#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(stat.mat,<span class="fu">aes</span>(<span class="at">x=</span>id,<span class="at">y=</span>statistics,<span class="at">color=</span>type)) <span class="sc">+</span> </span>
<span id="cb59-13"><a href="statistical-process-control-using-decision-tree.html#cb59-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb59-14"><a href="statistical-process-control-using-decision-tree.html#cb59-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>)</span></code></pre></div>
<p></p>
<p></p>
<div class="figure" style="text-align: center"><span id="fig:f9-13"></span>
<p class="caption marginnote shownote">
Figure 40: (Left) Chart of the monitoring statistics over time. Three monitoring statistics are shown: <em>error0</em> denotes the error rate in Class <span class="math inline">\(0\)</span>, <em>error1</em> denotes the error rate in Class <span class="math inline">\(1\)</span>, and <em>prob</em> denotes the probability estimates of the data points; (right) chart of the importance score of the two variables
</p>
<img src="graphics/9_13.png" alt="(Left) Chart of the monitoring statistics over time. Three monitoring statistics are shown: *error0* denotes the error rate in Class $0$, *error1* denotes the error rate in Class $1$, and *prob* denotes the probability estimates of the data points; (right) chart of the importance score of the two variables" width="49%" height="49%"  /><img src="graphics/9_14.png" alt="(Left) Chart of the monitoring statistics over time. Three monitoring statistics are shown: *error0* denotes the error rate in Class $0$, *error1* denotes the error rate in Class $1$, and *prob* denotes the probability estimates of the data points; (right) chart of the importance score of the two variables" width="49%" height="49%"  />
</div>
<p></p>
<p>We have known that the process shift happened on <span class="math inline">\(x_2\)</span> after the <span class="math inline">\(100^{th}\)</span> data point—and that is exactly when a good monitoring statistic should signal the process change. Check Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-13">40</a> (left) and draw your observation.</p>
<p>As the two classes are separated, we could check which variables are significant. The importance scores of the two variables obtained by the random forest model are shown in Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-13">40</a> (right) drawn by the following R code.</p>
<p></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="statistical-process-control-using-decision-tree.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot importance scores for diagnosis</span></span>
<span id="cb60-2"><a href="statistical-process-control-using-decision-tree.html#cb60-2" aria-hidden="true" tabindex="-1"></a>importance.mat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(importance.mat)</span>
<span id="cb60-3"><a href="statistical-process-control-using-decision-tree.html#cb60-3" aria-hidden="true" tabindex="-1"></a>importance.mat<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(importance.mat)</span>
<span id="cb60-4"><a href="statistical-process-control-using-decision-tree.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(importance.mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;X1&quot;</span>,<span class="st">&quot;X2&quot;</span>,<span class="st">&quot;id&quot;</span>)</span>
<span id="cb60-5"><a href="statistical-process-control-using-decision-tree.html#cb60-5" aria-hidden="true" tabindex="-1"></a>importance.mat <span class="ot">&lt;-</span> importance.mat <span class="sc">%&gt;%</span> </span>
<span id="cb60-6"><a href="statistical-process-control-using-decision-tree.html#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(variable, importance,X1,X2)</span>
<span id="cb60-7"><a href="statistical-process-control-using-decision-tree.html#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(importance.mat,<span class="fu">aes</span>(<span class="at">x=</span>id,<span class="at">y=</span>importance,</span>
<span id="cb60-8"><a href="statistical-process-control-using-decision-tree.html#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color=</span>variable)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb60-9"><a href="statistical-process-control-using-decision-tree.html#cb60-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>)</span></code></pre></div>
<p></p>
<p>Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-13">40</a> (right) shows that the scores of <span class="math inline">\(x_2\)</span> significantly increase after the <span class="math inline">\(100^{th}\)</span> data point. This indicates that <span class="math inline">\(x_2\)</span> is responsible for the process change, which is true.</p>
<p>Let’s consider a <span class="math inline">\(10\)</span>-dimensional dataset with <span class="math inline">\(x_1\)</span>-<span class="math inline">\(x_{10}\)</span>. We still simulate <span class="math inline">\(100\)</span> reference data points of each variable from a normal distribution with mean <span class="math inline">\(0\)</span> and variance <span class="math inline">\(1\)</span>. We use the same distribution to draw the first <span class="math inline">\(100\)</span> online data points. Then, we draw the second <span class="math inline">\(100\)</span> online data points with two variables, <span class="math inline">\(x_9\)</span> and <span class="math inline">\(x_{10}\)</span>, whose means changed from <span class="math inline">\(0\)</span> to <span class="math inline">\(2\)</span>.</p>
<p></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="statistical-process-control-using-decision-tree.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 10-dimensions, with 2 variables being changed from </span></span>
<span id="cb61-2"><a href="statistical-process-control-using-decision-tree.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the normal condition</span></span>
<span id="cb61-3"><a href="statistical-process-control-using-decision-tree.html#cb61-3" aria-hidden="true" tabindex="-1"></a>dimension <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb61-4"><a href="statistical-process-control-using-decision-tree.html#cb61-4" aria-hidden="true" tabindex="-1"></a>wsz <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb61-5"><a href="statistical-process-control-using-decision-tree.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reference data</span></span>
<span id="cb61-6"><a href="statistical-process-control-using-decision-tree.html#cb61-6" aria-hidden="true" tabindex="-1"></a>data0 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>( dimension <span class="sc">*</span> length0, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb61-7"><a href="statistical-process-control-using-decision-tree.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co"># real-time data with no change</span></span>
<span id="cb61-8"><a href="statistical-process-control-using-decision-tree.html#cb61-8" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>( dimension <span class="sc">*</span> length1, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb61-9"><a href="statistical-process-control-using-decision-tree.html#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co"># real-time data different from the reference data in the </span></span>
<span id="cb61-10"><a href="statistical-process-control-using-decision-tree.html#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co"># second the variable</span></span>
<span id="cb61-11"><a href="statistical-process-control-using-decision-tree.html#cb61-11" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="fu">rnorm</span>( (dimension <span class="sc">-</span> <span class="dv">2</span>) <span class="sc">*</span> length2, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>), </span>
<span id="cb61-12"><a href="statistical-process-control-using-decision-tree.html#cb61-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rnorm</span>( (<span class="dv">2</span>) <span class="sc">*</span> length2, <span class="at">mean =</span> <span class="dv">20</span>, <span class="at">sd =</span> <span class="dv">1</span>))</span>
<span id="cb61-13"><a href="statistical-process-control-using-decision-tree.html#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="statistical-process-control-using-decision-tree.html#cb61-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-15"><a href="statistical-process-control-using-decision-tree.html#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="co"># convert to data frame</span></span>
<span id="cb61-16"><a href="statistical-process-control-using-decision-tree.html#cb61-16" aria-hidden="true" tabindex="-1"></a>data0 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(data0, <span class="at">nrow =</span> length0, <span class="at">byrow =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-17"><a href="statistical-process-control-using-decision-tree.html#cb61-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb61-18"><a href="statistical-process-control-using-decision-tree.html#cb61-18" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(data1, <span class="at">nrow =</span> length1, <span class="at">byrow =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-19"><a href="statistical-process-control-using-decision-tree.html#cb61-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb61-20"><a href="statistical-process-control-using-decision-tree.html#cb61-20" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(data2, <span class="at">ncol =</span> <span class="dv">10</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-21"><a href="statistical-process-control-using-decision-tree.html#cb61-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()</span>
<span id="cb61-22"><a href="statistical-process-control-using-decision-tree.html#cb61-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-23"><a href="statistical-process-control-using-decision-tree.html#cb61-23" aria-hidden="true" tabindex="-1"></a><span class="co"># assign reference data with class 0 and real-time data </span></span>
<span id="cb61-24"><a href="statistical-process-control-using-decision-tree.html#cb61-24" aria-hidden="true" tabindex="-1"></a><span class="co"># with class 1</span></span>
<span id="cb61-25"><a href="statistical-process-control-using-decision-tree.html#cb61-25" aria-hidden="true" tabindex="-1"></a>data0 <span class="ot">&lt;-</span> data0 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">class =</span> <span class="dv">0</span>)</span>
<span id="cb61-26"><a href="statistical-process-control-using-decision-tree.html#cb61-26" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> data1 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">class =</span> <span class="dv">1</span>)</span>
<span id="cb61-27"><a href="statistical-process-control-using-decision-tree.html#cb61-27" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">class =</span> <span class="dv">1</span>)</span>
<span id="cb61-28"><a href="statistical-process-control-using-decision-tree.html#cb61-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-29"><a href="statistical-process-control-using-decision-tree.html#cb61-29" aria-hidden="true" tabindex="-1"></a><span class="co"># real-time data consists of normal data and abnormal data</span></span>
<span id="cb61-30"><a href="statistical-process-control-using-decision-tree.html#cb61-30" aria-hidden="true" tabindex="-1"></a>data.real.time <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data1,data2)</span></code></pre></div>
<p></p>
<p></p>
<div class="figure" style="text-align: center"><span id="fig:f9-14"></span>
<p class="caption marginnote shownote">
Figure 41: (Left) Chart of the monitoring statistics over time. Three monitoring statistics are shown: <em>error0</em> denotes the error rate in Class <span class="math inline">\(0\)</span>, <em>error1</em> denotes the error rate in Class <span class="math inline">\(1\)</span>, and <em>prob</em> denotes the probability estimates of the data points; (right) chart of the importance score of the variables
</p>
<img src="graphics/9_19.png" alt="(Left) Chart of the monitoring statistics over time. Three monitoring statistics are shown: *error0* denotes the error rate in Class $0$, *error1* denotes the error rate in Class $1$, and *prob* denotes the probability estimates of the data points; (right) chart of the importance score of the variables" width="49%" height="49%"  /><img src="graphics/9_20.png" alt="(Left) Chart of the monitoring statistics over time. Three monitoring statistics are shown: *error0* denotes the error rate in Class $0$, *error1* denotes the error rate in Class $1$, and *prob* denotes the probability estimates of the data points; (right) chart of the importance score of the variables" width="49%" height="49%"  />
</div>
<p></p>
<p>Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-14">41</a> (left) shows that all the monitoring statistics change after the <span class="math inline">\(101^{th}\)</span> time point, and the variables’ scores in Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-14">41</a> (right) indicate the change is due to <span class="math inline">\(x_9\)</span> and <span class="math inline">\(x_{10}\)</span>, which is true. The following R codes generated Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-14">41</a> (left).</p>
<p></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="statistical-process-control-using-decision-tree.html#cb62-1" aria-hidden="true" tabindex="-1"></a>result <span class="ot">&lt;-</span> <span class="fu">Monitoring</span>( data0, data.real.time, wsz )</span>
<span id="cb62-2"><a href="statistical-process-control-using-decision-tree.html#cb62-2" aria-hidden="true" tabindex="-1"></a>stat.mat <span class="ot">&lt;-</span> result<span class="sc">$</span>stat.mat</span>
<span id="cb62-3"><a href="statistical-process-control-using-decision-tree.html#cb62-3" aria-hidden="true" tabindex="-1"></a>importance.mat <span class="ot">&lt;-</span> result<span class="sc">$</span>importance.mat</span>
<span id="cb62-4"><a href="statistical-process-control-using-decision-tree.html#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="statistical-process-control-using-decision-tree.html#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co"># plot different monitor statistics</span></span>
<span id="cb62-6"><a href="statistical-process-control-using-decision-tree.html#cb62-6" aria-hidden="true" tabindex="-1"></a>stat.mat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(stat.mat)</span>
<span id="cb62-7"><a href="statistical-process-control-using-decision-tree.html#cb62-7" aria-hidden="true" tabindex="-1"></a>stat.mat<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(stat.mat)</span>
<span id="cb62-8"><a href="statistical-process-control-using-decision-tree.html#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(stat.mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;error0&quot;</span>,<span class="st">&quot;error1&quot;</span>,<span class="st">&quot;prob&quot;</span>,<span class="st">&quot;id&quot;</span>)</span>
<span id="cb62-9"><a href="statistical-process-control-using-decision-tree.html#cb62-9" aria-hidden="true" tabindex="-1"></a>stat.mat <span class="ot">&lt;-</span> stat.mat <span class="sc">%&gt;%</span> <span class="fu">gather</span>(type, statistics, error0,</span>
<span id="cb62-10"><a href="statistical-process-control-using-decision-tree.html#cb62-10" aria-hidden="true" tabindex="-1"></a>                                error1,prob)</span>
<span id="cb62-11"><a href="statistical-process-control-using-decision-tree.html#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(stat.mat,<span class="fu">aes</span>(<span class="at">x=</span>id,<span class="at">y=</span>statistics,<span class="at">color=</span>type))<span class="sc">+</span></span>
<span id="cb62-12"><a href="statistical-process-control-using-decision-tree.html#cb62-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb62-13"><a href="statistical-process-control-using-decision-tree.html#cb62-13" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>)</span></code></pre></div>
<p></p>
<p>The following R codes generated Figure <a href="statistical-process-control-using-decision-tree.html#fig:f9-14">41</a> (right).</p>
<p></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="statistical-process-control-using-decision-tree.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot importance scores for diagnosis</span></span>
<span id="cb63-2"><a href="statistical-process-control-using-decision-tree.html#cb63-2" aria-hidden="true" tabindex="-1"></a>importance.mat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(importance.mat)</span>
<span id="cb63-3"><a href="statistical-process-control-using-decision-tree.html#cb63-3" aria-hidden="true" tabindex="-1"></a>importance.mat<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(importance.mat)</span>
<span id="cb63-4"><a href="statistical-process-control-using-decision-tree.html#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co"># colnames(importance.mat) &lt;- c(&quot;X1&quot;,&quot;X2&quot;,&quot;id&quot;)</span></span>
<span id="cb63-5"><a href="statistical-process-control-using-decision-tree.html#cb63-5" aria-hidden="true" tabindex="-1"></a>importance.mat <span class="ot">&lt;-</span> importance.mat <span class="sc">%&gt;%</span> </span>
<span id="cb63-6"><a href="statistical-process-control-using-decision-tree.html#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(variable, importance,X1<span class="sc">:</span>X10)</span>
<span id="cb63-7"><a href="statistical-process-control-using-decision-tree.html#cb63-7" aria-hidden="true" tabindex="-1"></a>importance.mat<span class="sc">$</span>variable <span class="ot">&lt;-</span> <span class="fu">factor</span>( importance.mat<span class="sc">$</span>variable,</span>
<span id="cb63-8"><a href="statistical-process-control-using-decision-tree.html#cb63-8" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">levels =</span> <span class="fu">paste0</span>( <span class="st">&quot;X&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>))</span>
<span id="cb63-9"><a href="statistical-process-control-using-decision-tree.html#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="co"># levels(importance.mat$variable) &lt;- paste0( &quot;X&quot;, 1:10  )</span></span>
<span id="cb63-10"><a href="statistical-process-control-using-decision-tree.html#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(importance.mat,<span class="fu">aes</span>(<span class="at">x=</span>id,<span class="at">y=</span>importance,<span class="at">color=</span></span>
<span id="cb63-11"><a href="statistical-process-control-using-decision-tree.html#cb63-11" aria-hidden="true" tabindex="-1"></a>          variable)) <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb63-12"><a href="statistical-process-control-using-decision-tree.html#cb63-12" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">2</span>)</span></code></pre></div>
<p></p>
</div>
</div>
<p style="text-align: center;">
<a href="ranking-problem-by-pairwise-comparison.html"><button class="btn btn-default">Previous</button></a>
<a href="remarks-1.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>

<script src="js/jquery.js"></script>
<script src="js/tablesaw-stackonly.js"></script>
<script src="js/nudge.min.js"></script>


<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
